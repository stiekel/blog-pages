






<!doctype html>
<html lang="zh-CN">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Stiekel">
  
  
  
  
    <meta name="description" content="本文是一篇翻译文章，原文信息如下：

  原文：45 Useful JavaScript Tips, Tricks and Best Practices
  作者：Saad Mousliki

JavaScript是一个绝冠全球的编程语言，可用于Web开发、移动应用开发（PhoneGap、Appcelerator）、服务器端开发（Node.js和Wakanda）等等。JavaScript还是...">
  
  <title>JavaScript奇技淫巧45招 [ 不可能不确定 ]</title>
  
    <link rel="alternate" href="/atom.xml" title="不可能不确定" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/hollow.ico">
  
  
  
<link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2015-01/Node-js-Ajax-Upload-File.html">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        利用Ajax无刷新上传文件到Node.js服务器
      </div>
    </div>
  
  
    <div class="item next">
      <a href="/2015-01/shanghai-insect-museum.html">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        上海昆虫博物馆
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="https://avatars2.githubusercontent.com/u/2735087?s=60&u=775d4033139cae6b23c593bcf59fa433224ba4e3&v=4"/>
          <div id="homelink">不可能不确定</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/index.html">首页</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">文章</a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">标签</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">分类</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">关于</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  

  <article id="post">
    <h1>JavaScript奇技淫巧45招</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">撰写于 2015年1月5日</span>
      
        <span id = "post-title-updated">修改于 2021年3月11日</span>
      
      
      <span id = "post-title-categories">分类
      
      
        
        
        <a href="/categories/%E7%BF%BB%E8%AF%91/">翻译</a>
      
      </span>
      
      
        <span id = "post-title-tags">
          标签
          
          
            
            
            <a href="/tags/JavaScript/">JavaScript</a>
          
        </span>
      
      <span id="/2015-01/45-useful-javascript-tips-tricks-and-best-practices.html" class="leancloud-visitors" data-flag-title="JavaScript奇技淫巧45招">
        <i class="leancloud-visitors-count"></i>
        <em class="post-meta-item-text"> views </em>
      </span>
    </p>
    
    <p>本文是一篇翻译文章，原文信息如下：</p>
<ul>
<li>  原文：<a target="_blank" rel="noopener" href="http://modernweb.com/2013/12/23/45-useful-javascript-tips-tricks-and-best-practices/">45 Useful JavaScript Tips, Tricks and Best Practices</a></li>
<li>  作者：<a target="_blank" rel="noopener" href="http://modernweb.com/authors/saad-mousliki/">Saad Mousliki</a></li>
</ul>
<p>JavaScript是一个绝冠全球的编程语言，可用于Web开发、移动应用开发（<a target="_blank" rel="noopener" href="http://phonegap.com/">PhoneGap</a>、<a target="_blank" rel="noopener" href="http://www.appcelerator.com/">Appcelerator</a>）、服务器端开发（<a target="_blank" rel="noopener" href="http://nodejs.org/">Node.js</a>和<a target="_blank" rel="noopener" href="http://wakanda.org/">Wakanda</a>）等等。JavaScript还是很多新手踏入编程世界的第一个语言。既可以用来显示浏览器中的简单提示框，也可以通过<a target="_blank" rel="noopener" href="http://nodebots.io/">nodebot</a>或<a target="_blank" rel="noopener" href="http://semu.github.io/noduino/">nodruino</a>来控制机器人。能够编写结构清晰、性能高效的JavaScript代码的开发人员，现如今已成了招聘市场最受追捧的人。</p>
<p>在这篇文章里，我将分享一些JavaScript的技巧、秘诀和最佳实践，除了少数几个外，不管是浏览器的JavaScript引擎，还是服务器端JavaScript解释器，均适用。</p>
<p>本文中的示例代码，通过了在Google Chrome 30最新版（V8 3.20.17.15）上的测试。</p>
<span id="more"></span>

<h3 id="1、首次为变量赋值时务必使用var关键字"><a href="#1、首次为变量赋值时务必使用var关键字" class="headerlink" title="1、首次为变量赋值时务必使用var关键字"></a>1、首次为变量赋值时务必使用<code>var</code>关键字</h3><p>变量没有声明而直接赋值得话，默认会作为一个新的全局变量，要尽量避免使用全局变量。</p>
<h3 id="2、使用-取代"><a href="#2、使用-取代" class="headerlink" title="2、使用===取代=="></a>2、使用<code>===</code>取代<code>==</code></h3><p><code>==</code>和<code>!=</code>操作符会在需要的情况下自动转换数据类型。但<code>===</code>和<code>!==</code>不会，它们会同时比较值和数据类型，这也使得它们要比<code>==</code>和<code>!=</code>快。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">10</span>] === <span class="number">10</span>    <span class="comment">// is false</span></span><br><span class="line">[<span class="number">10</span>]  == <span class="number">10</span>    <span class="comment">// is true</span></span><br><span class="line"><span class="string">&#x27;10&#x27;</span> == <span class="number">10</span>     <span class="comment">// is true</span></span><br><span class="line"><span class="string">&#x27;10&#x27;</span> === <span class="number">10</span>    <span class="comment">// is false</span></span><br><span class="line"> []   == <span class="number">0</span>     <span class="comment">// is true</span></span><br><span class="line"> [] ===  <span class="number">0</span>     <span class="comment">// is false</span></span><br><span class="line"> <span class="string">&#x27;&#x27;</span> == <span class="literal">false</span>   <span class="comment">// is true but true == &quot;a&quot; is false</span></span><br><span class="line"> <span class="string">&#x27;&#x27;</span> === <span class="literal">false</span>  <span class="comment">// is false </span></span><br></pre></td></tr></table></figure>

<h3 id="3、underfined、null、0、false、NaN、空字符串的逻辑结果均为false"><a href="#3、underfined、null、0、false、NaN、空字符串的逻辑结果均为false" class="headerlink" title="3、underfined、null、0、false、NaN、空字符串的逻辑结果均为false"></a>3、<code>underfined</code>、<code>null</code>、0、false、NaN、空字符串的逻辑结果均为false</h3><h3 id="4、行尾使用分号"><a href="#4、行尾使用分号" class="headerlink" title="4、行尾使用分号"></a>4、行尾使用分号</h3><p>实践中最好还是使用分号，忘了写也没事，大部分情况下JavaScript解释器都会自动添加。对于为何要使用分号，可参考文章<a target="_blank" rel="noopener" href="http://davidwalsh.name/javascript-semicolons">JavaScript中关于分号的真相</a>。</p>
<h3 id="5、使用对象构造器"><a href="#5、使用对象构造器" class="headerlink" title="5、使用对象构造器"></a>5、使用对象构造器</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">firstName, lastName</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.firstName =  firstName;</span><br><span class="line">    <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> Saad = <span class="keyword">new</span> Person(<span class="string">&quot;Saad&quot;</span>, <span class="string">&quot;Mousliki&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="6、小心使用typeof、instanceof和contructor"><a href="#6、小心使用typeof、instanceof和contructor" class="headerlink" title="6、小心使用typeof、instanceof和contructor"></a>6、小心使用<code>typeof</code>、<code>instanceof</code>和<code>contructor</code></h3><ul>
<li>  <code>typeof</code>：JavaScript一元操作符，用于以字符串的形式返回变量的原始类型，注意，<code>typeof null</code>也会返回<code>object</code>，大多数的对象类型（数组Array、时间Date等）也会返回<code>object</code></li>
<li>  <code>contructor</code>：内部原型属性，可以通过代码重写</li>
<li>  <code>instanceof</code>：JavaScript操作符，会在原型链中的构造器中搜索，找到则返回<code>true</code>，否则返回<code>false</code></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>];</span><br><span class="line"><span class="keyword">typeof</span> arr;   <span class="comment">// 返回 &quot;object&quot; </span></span><br><span class="line">arr <span class="keyword">instanceof</span> <span class="built_in">Array</span> <span class="comment">// true</span></span><br><span class="line">arr.constructor();  <span class="comment">//[]</span></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">### 7、使用自调用函数</span><br><span class="line"></span><br><span class="line">函数在创建之后直接自动执行，通常称之为自调用匿名函数（Self-Invoked Anonymous <span class="built_in">Function</span>）或直接调用函数表达式（Immediately Invoked <span class="built_in">Function</span> Expression ）。格式如下：</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    // 置于此处的代码将自动执行</span></span><br><span class="line"><span class="string">&#125;)();  </span></span><br><span class="line"><span class="string">(function(a,b)&#123;</span></span><br><span class="line"><span class="string">    var result = a+b;</span></span><br><span class="line"><span class="string">    return result;</span></span><br><span class="line"><span class="string">&#125;)(10,20)</span></span><br></pre></td></tr></table></figure>

<h3 id="8、从数组中随机获取成员"><a href="#8、从数组中随机获取成员" class="headerlink" title="8、从数组中随机获取成员"></a>8、从数组中随机获取成员</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> , <span class="string">&#x27;a&#x27;</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">&#x27;foo&#x27;</span> , <span class="number">8852</span>, , <span class="string">&#x27;Doe&#x27;</span> , <span class="number">2145</span> , <span class="number">119</span>];</span><br><span class="line"><span class="keyword">var</span>  randomItem = items[<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * items.length)];</span><br></pre></td></tr></table></figure>

<h3 id="9、获取指定范围内的随机数"><a href="#9、获取指定范围内的随机数" class="headerlink" title="9、获取指定范围内的随机数"></a>9、获取指定范围内的随机数</h3><p>这个功能在生成测试用的假数据时特别有数，比如介与指定范围内的工资数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * (max - min + <span class="number">1</span>)) + min;</span><br></pre></td></tr></table></figure>

<h3 id="10、生成从0到指定值的数字数组"><a href="#10、生成从0到指定值的数字数组" class="headerlink" title="10、生成从0到指定值的数字数组"></a>10、生成从0到指定值的数字数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbersArray = [] , max = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">var</span> i=<span class="number">1</span>; numbersArray.push(i++) &lt; max;);  <span class="comment">// numbers = [1,2,3 ... 100] </span></span><br></pre></td></tr></table></figure>

<h3 id="11、生成随机的字母数字字符串"><a href="#11、生成随机的字母数字字符串" class="headerlink" title="11、生成随机的字母数字字符串"></a>11、生成随机的字母数字字符串</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateRandomAlphaNum</span>(<span class="params">len</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> rdmString = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span>( ; rdmString.length &lt; len; rdmString  += <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">return</span>  rdmString.substr(<span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12、打乱数字数组的顺序"><a href="#12、打乱数字数组的顺序" class="headerlink" title="12、打乱数字数组的顺序"></a>12、打乱数字数组的顺序</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>];</span><br><span class="line">numbers = numbers.sort(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="built_in">Math</span>.random() - <span class="number">0.5</span>&#125;);</span><br><span class="line"><span class="comment">/* numbers 数组将类似于 [120, 5, 228, -215, 400, 458, -85411, 122205]  */</span></span><br></pre></td></tr></table></figure>

<p>这里使用了JavaScript内置的数组排序函数，更好的办法是用专门的代码来实现（如Fisher-Yates算法），可以参见StackOverFlow上的<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/962802/is-it-correct-to-use-javascript-array-sort-method-for-shuffling/962890#962890">这个讨论</a>。</p>
<h3 id="13、字符串去空格"><a href="#13、字符串去空格" class="headerlink" title="13、字符串去空格"></a>13、字符串去空格</h3><p>Java、C#和PHP等语言都实现了专门的字符串去空格函数，但JavaScript中是没有的，可以通过下面的代码来为<code>String</code>对象函数一个<code>trim</code>函数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span>.prototype.trim = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="built_in">this</span>.replace(<span class="regexp">/^\s+|\s+$/g</span>, <span class="string">&quot;&quot;</span>);&#125;;  </span><br></pre></td></tr></table></figure>

<p>新的JavaScript引擎已经有了<code>trim()</code>的原生实现。</p>
<h3 id="14、数组之间追加"><a href="#14、数组之间追加" class="headerlink" title="14、数组之间追加"></a>14、数组之间追加</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array1 = [<span class="number">12</span> , <span class="string">&quot;foo&quot;</span> , &#123;name <span class="string">&quot;Joe&quot;</span>&#125; , -<span class="number">2458</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = [<span class="string">&quot;Doe&quot;</span> , <span class="number">555</span> , <span class="number">100</span>];</span><br><span class="line"><span class="built_in">Array</span>.prototype.push.apply(array1, array2);</span><br><span class="line"><span class="comment">/* array1 值为  [12 , &quot;foo&quot; , &#123;name &quot;Joe&quot;&#125; , -2458 , &quot;Doe&quot; , 555 , 100] */</span></span><br></pre></td></tr></table></figure>

<h3 id="15、对象转换为数组"><a href="#15、对象转换为数组" class="headerlink" title="15、对象转换为数组"></a>15、对象转换为数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> argArray = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure>

<h3 id="16、验证是否是数字"><a href="#16、验证是否是数字" class="headerlink" title="16、验证是否是数字"></a>16、验证是否是数字</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumber</span>(<span class="params">n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseFloat</span>(n)) &amp;&amp; <span class="built_in">isFinite</span>(n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="17、验证是否是数组"><a href="#17、验证是否是数组" class="headerlink" title="17、验证是否是数组"></a>17、验证是否是数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(obj) === <span class="string">&#x27;[object Array]&#x27;</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但如果<code>toString()</code>方法被重写过得话，就行不通了。也可以使用下面的方法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.isArray(obj); <span class="comment">// its a new Array method</span></span><br><span class="line"><span class="string">``</span><span class="string">``</span></span><br><span class="line"></span><br><span class="line">如果在浏览器中没有使用frame，还可以用<span class="string">`instanceof`</span>，但如果上下文太复杂，也有可能出错。</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`js</span></span><br><span class="line"><span class="string">var myFrame = document.createElement(&#x27;iframe&#x27;);</span></span><br><span class="line"><span class="string">document.body.appendChild(myFrame);</span></span><br><span class="line"><span class="string">var myArray = window.frames[window.frames.length-1].Array;</span></span><br><span class="line"><span class="string">var arr = new myArray(a,b,10); // [a,b,10]  </span></span><br><span class="line"><span class="string">// myArray 的构造器已经丢失，instanceof 的结果将不正常</span></span><br><span class="line"><span class="string">// 构造器是不能跨 frame 共享的</span></span><br><span class="line"><span class="string">arr instanceof Array; // false</span></span><br></pre></td></tr></table></figure>

<h3 id="18、获取数组中的最大值和最小值"><a href="#18、获取数组中的最大值和最小值" class="headerlink" title="18、获取数组中的最大值和最小值"></a>18、获取数组中的最大值和最小值</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  numbers = [<span class="number">5</span>, <span class="number">458</span> , <span class="number">120</span> , -<span class="number">215</span> , <span class="number">228</span> , <span class="number">400</span> , <span class="number">122205</span>, -<span class="number">85411</span>]; </span><br><span class="line"><span class="keyword">var</span> maxInNumbers = <span class="built_in">Math</span>.max.apply(<span class="built_in">Math</span>, numbers); </span><br><span class="line"><span class="keyword">var</span> minInNumbers = <span class="built_in">Math</span>.min.apply(<span class="built_in">Math</span>, numbers);</span><br></pre></td></tr></table></figure>

<h3 id="19、清空数组"><a href="#19、清空数组" class="headerlink" title="19、清空数组"></a>19、清空数组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var myArray &#x3D; [12 , 222 , 1000 ];  </span><br><span class="line">myArray.length &#x3D; 0; &#x2F;&#x2F; myArray will be equal to [].</span><br></pre></td></tr></table></figure>

<h3 id="20、不要直接从数组中delete或remove元素"><a href="#20、不要直接从数组中delete或remove元素" class="headerlink" title="20、不要直接从数组中delete或remove元素"></a>20、不要直接从数组中<code>delete</code>或<code>remove</code>元素</h3><p>如果对数组元素直接使用<code>delete</code>，其实并没有删除，只是将元素置为了<code>undefined</code>。数组元素删除应使用<code>splice</code>。</p>
<p>切忌：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> ,<span class="string">&#x27;a&#x27;</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">&#x27;foo&#x27;</span> , <span class="number">8852</span>, , <span class="string">&#x27;Doe&#x27;</span> ,<span class="number">2154</span> , <span class="number">119</span> ]; </span><br><span class="line">items.length; <span class="comment">// return 11 </span></span><br><span class="line"><span class="keyword">delete</span> items[<span class="number">3</span>]; <span class="comment">// return true </span></span><br><span class="line">items.length; <span class="comment">// return 11 </span></span><br><span class="line"><span class="comment">/* items 结果为 [12, 548, &quot;a&quot;, undefined × 1, 5478, &quot;foo&quot;, 8852, undefined × 1, &quot;Doe&quot;, 2154, 119] */</span></span><br></pre></td></tr></table></figure>

<p>而应：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> items = [<span class="number">12</span>, <span class="number">548</span> ,<span class="string">&#x27;a&#x27;</span> , <span class="number">2</span> , <span class="number">5478</span> , <span class="string">&#x27;foo&#x27;</span> , <span class="number">8852</span>, , <span class="string">&#x27;Doe&#x27;</span> ,<span class="number">2154</span> , <span class="number">119</span> ]; </span><br><span class="line">items.length; <span class="comment">// return 11 </span></span><br><span class="line">items.splice(<span class="number">3</span>,<span class="number">1</span>) ; </span><br><span class="line">items.length; <span class="comment">// return 10 </span></span><br><span class="line"><span class="comment">/* items 结果为 [12, 548, &quot;a&quot;, 5478, &quot;foo&quot;, 8852, undefined × 1, &quot;Doe&quot;, 2154, 119] </span></span><br></pre></td></tr></table></figure>

<p>删除对象的属性时可以使用<code>delete</code>。</p>
<h3 id="21、使用length属性截断数组"><a href="#21、使用length属性截断数组" class="headerlink" title="21、使用length属性截断数组"></a>21、使用<code>length</code>属性截断数组</h3><p>前面的例子中用<code>length</code>属性清空数组，同样还可用它来截断数组：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = [<span class="number">12</span> , <span class="number">222</span> , <span class="number">1000</span> , <span class="number">124</span> , <span class="number">98</span> , <span class="number">10</span> ];  </span><br><span class="line">myArray.length = <span class="number">4</span>; <span class="comment">// myArray will be equal to [12 , 222 , 1000 , 124].</span></span><br></pre></td></tr></table></figure>

<p>与此同时，如果把<code>length</code>属性变大，数组的长度值变会增加，会使用<code>undefined</code>来作为新的元素填充。<code>length</code>是一个可写的属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myArray.length = <span class="number">10</span>; <span class="comment">// the new array length is 10 </span></span><br><span class="line">myArray[myArray.length - <span class="number">1</span>] ; <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="22、在条件中使用逻辑与或"><a href="#22、在条件中使用逻辑与或" class="headerlink" title="22、在条件中使用逻辑与或"></a>22、在条件中使用逻辑与或</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">10</span>;  </span><br><span class="line">foo == <span class="number">10</span> &amp;&amp; doSomething(); <span class="comment">// is the same thing as if (foo == 10) doSomething(); </span></span><br><span class="line">foo == <span class="number">5</span> || doSomething(); <span class="comment">// is the same thing as if (foo != 5) doSomething();</span></span><br></pre></td></tr></table></figure>

<p>逻辑或还可用来设置默认值，比如函数参数的默认值。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doSomething</span>(<span class="params">arg1</span>)</span>&#123; </span><br><span class="line">    arg1 = arg1 || <span class="number">10</span>; <span class="comment">// arg1 will have 10 as a default value if it’s not already set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="23、使得map-函数方法对数据循环"><a href="#23、使得map-函数方法对数据循环" class="headerlink" title="23、使得map()函数方法对数据循环"></a>23、使得<code>map()</code>函数方法对数据循环</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> squares = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].map(<span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">return</span> val * val;  </span><br><span class="line">&#125;); </span><br><span class="line"><span class="comment">// squares will be equal to [1, 4, 9, 16] </span></span><br></pre></td></tr></table></figure>

<h3 id="24、保留指定小数位数"><a href="#24、保留指定小数位数" class="headerlink" title="24、保留指定小数位数"></a>24、保留指定小数位数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num =<span class="number">2.443242342</span>;</span><br><span class="line">num = num.toFixed(<span class="number">4</span>);  <span class="comment">// num will be equal to 2.4432</span></span><br></pre></td></tr></table></figure>

<p>注意，<code>toFixec()</code>返回的是字符串，不是数字。</p>
<h3 id="25、浮点计算的问题"><a href="#25、浮点计算的问题" class="headerlink" title="25、浮点计算的问题"></a>25、浮点计算的问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0.1</span> + <span class="number">0.2</span> === <span class="number">0.3</span> <span class="comment">// is false </span></span><br><span class="line"><span class="number">9007199254740992</span> + <span class="number">1</span> <span class="comment">// is equal to 9007199254740992</span></span><br><span class="line"><span class="number">9007199254740992</span> + <span class="number">2</span> <span class="comment">// is equal to 9007199254740994</span></span><br></pre></td></tr></table></figure>

<p>为什么呢？因为0.1+0.2等于0.30000000000000004。JavaScript的数字都遵循IEEE 754标准构建，在内部都是64位浮点小数表示，具体可以参见<a target="_blank" rel="noopener" href="http://www.2ality.com/2012/04/number-encoding.html">JavaScript中的数字是如何编码的</a>.</p>
<p>可以通过使用<code>toFixed()</code>和<code>toPrecision()</code>来解决这个问题。</p>
<h3 id="26、通过for-in循环检查对象的属性"><a href="#26、通过for-in循环检查对象的属性" class="headerlink" title="26、通过for-in循环检查对象的属性"></a>26、通过for-in循环检查对象的属性</h3><p>下面这样的用法，可以防止迭代的时候进入到对象的原型属性中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> object) &#123;  </span><br><span class="line">    <span class="keyword">if</span> (object.hasOwnProperty(name)) &#123; </span><br><span class="line">        <span class="comment">// do something with name</span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="27、逗号操作符"><a href="#27、逗号操作符" class="headerlink" title="27、逗号操作符"></a>27、逗号操作符</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">0</span>; </span><br><span class="line"><span class="keyword">var</span> b = ( a++, <span class="number">99</span> ); </span><br><span class="line"><span class="built_in">console</span>.log(a);  <span class="comment">// a will be equal to 1 </span></span><br><span class="line"><span class="built_in">console</span>.log(b);  <span class="comment">// b is equal to 99</span></span><br></pre></td></tr></table></figure>

<h3 id="28、临时存储用于计算和查询的变量"><a href="#28、临时存储用于计算和查询的变量" class="headerlink" title="28、临时存储用于计算和查询的变量"></a>28、临时存储用于计算和查询的变量</h3><p>在jQuery选择器中，可以临时存储整个DOM元素。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> navright = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#right&#x27;</span>); </span><br><span class="line"><span class="keyword">var</span> navleft = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#left&#x27;</span>); </span><br><span class="line"><span class="keyword">var</span> navup = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#up&#x27;</span>); </span><br><span class="line"><span class="keyword">var</span> navdown = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#down&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="29、提前检查传入isFinite-的参数"><a href="#29、提前检查传入isFinite-的参数" class="headerlink" title="29、提前检查传入isFinite()的参数"></a>29、提前检查传入<code>isFinite()</code>的参数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">isFinite</span>(<span class="number">0</span>/<span class="number">0</span>) ; <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="string">&quot;foo&quot;</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="string">&quot;10&quot;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="number">10</span>);   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="literal">undefined</span>);  <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>();   <span class="comment">// false</span></span><br><span class="line"><span class="built_in">isFinite</span>(<span class="literal">null</span>);  <span class="comment">// true，这点当特别注意</span></span><br></pre></td></tr></table></figure>

<h3 id="30、避免在数组中使用负数做索引"><a href="#30、避免在数组中使用负数做索引" class="headerlink" title="30、避免在数组中使用负数做索引"></a>30、避免在数组中使用负数做索引</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> numbersArray = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> <span class="keyword">from</span> = numbersArray.indexOf(<span class="string">&quot;foo&quot;</span>) ;  <span class="comment">// from is equal to -1</span></span><br><span class="line">numbersArray.splice(<span class="keyword">from</span>,<span class="number">2</span>);    <span class="comment">// will return [5]</span></span><br></pre></td></tr></table></figure>

<p>注意传给<code>splice</code>的索引参数不要是负数，当是负数时，会从数组结尾处删除元素。</p>
<h3 id="31、用JSON来序列化与反序列化"><a href="#31、用JSON来序列化与反序列化" class="headerlink" title="31、用JSON来序列化与反序列化"></a>31、用JSON来序列化与反序列化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = &#123;<span class="attr">name</span> :<span class="string">&#x27;Saad&#x27;</span>, <span class="attr">age</span> : <span class="number">26</span>, <span class="attr">department</span> : &#123;<span class="attr">ID</span> : <span class="number">15</span>, <span class="attr">name</span> : <span class="string">&quot;R&amp;D&quot;</span>&#125; &#125;;</span><br><span class="line"><span class="keyword">var</span> stringFromPerson = <span class="built_in">JSON</span>.stringify(person);</span><br><span class="line"><span class="comment">/* stringFromPerson 结果为 &quot;&#123;&quot;name&quot;:&quot;Saad&quot;,&quot;age&quot;:26,&quot;department&quot;:&#123;&quot;ID&quot;:15,&quot;name&quot;:&quot;R&amp;D&quot;&#125;&#125;&quot;   */</span></span><br><span class="line"><span class="keyword">var</span> personFromString = <span class="built_in">JSON</span>.parse(stringFromPerson);</span><br><span class="line"><span class="comment">/* personFromString 的值与 person 对象相同  */</span></span><br></pre></td></tr></table></figure>

<h3 id="32、不要使用eval-或者函数构造器"><a href="#32、不要使用eval-或者函数构造器" class="headerlink" title="32、不要使用eval()或者函数构造器"></a>32、不要使用<code>eval()</code>或者函数构造器</h3><p><code>eval()</code>和函数构造器（<code>Function</code> consturctor）的开销较大，每次调用，JavaScript引擎都要将源代码转换为可执行的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> func1 = <span class="keyword">new</span> <span class="built_in">Function</span>(functionCode);</span><br><span class="line"><span class="keyword">var</span> func2 = <span class="built_in">eval</span>(functionCode);</span><br></pre></td></tr></table></figure>

<h3 id="33、避免使用with"><a href="#33、避免使用with" class="headerlink" title="33、避免使用with()"></a>33、避免使用<code>with()</code></h3><p>使用<code>with()</code>可以把变量加入到全局作用域中，因此，如果有其它的同名变量，一来容易混淆，二来值也会被覆盖。</p>
<h3 id="34、不要对数组使用for-in"><a href="#34、不要对数组使用for-in" class="headerlink" title="34、不要对数组使用for-in"></a>34、不要对数组使用for-in</h3><p>避免：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> arrayNumbers) &#123;  </span><br><span class="line">    sum += arrayNumbers[i];  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而是：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="number">0</span>;  </span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arrayNumbers.length; i &lt; len; i++) &#123;  </span><br><span class="line">    sum += arrayNumbers[i];  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另外一个好处是，<code>i</code>和<code>len</code>两个变量是在<code>for</code>循环的第一个声明中，二者只会初始化一次，这要比下面这种写法快：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arrayNumbers.length; i++)</span><br></pre></td></tr></table></figure>

<h3 id="35、传给setInterval-和setTimeout-时使用函数而不是字符串"><a href="#35、传给setInterval-和setTimeout-时使用函数而不是字符串" class="headerlink" title="35、传给setInterval()和setTimeout()时使用函数而不是字符串"></a>35、传给<code>setInterval()</code>和<code>setTimeout()</code>时使用函数而不是字符串</h3><p>如果传给<code>setTimeout()</code>和<code>setInterval()</code>一个字符串，他们将会用类似于<code>eval</code>方式进行转换，这肯定会要慢些，因此不要使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="string">&#x27;doSomethingPeriodically()&#x27;</span>, <span class="number">1000</span>);  </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="string">&#x27;doSomethingAfterFiveSeconds()&#x27;</span>, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<p>而是用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(doSomethingPeriodically, <span class="number">1000</span>);  </span><br><span class="line"><span class="built_in">setTimeout</span>(doSomethingAfterFiveSeconds, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="36、使用switch-case代替一大叠的if-else"><a href="#36、使用switch-case代替一大叠的if-else" class="headerlink" title="36、使用switch/case代替一大叠的if/else"></a>36、使用<code>switch/case</code>代替一大叠的<code>if/else</code></h3><p>当判断有超过两个分支的时候使用<code>switch/case</code>要更快一些，而且也更优雅，更利于代码的组织，当然，如果有超过10个分支，就不要使用<code>switch/case</code>了。</p>
<h3 id="37、在switch-case中使用数字区间"><a href="#37、在switch-case中使用数字区间" class="headerlink" title="37、在switch/case中使用数字区间"></a>37、在<code>switch/case</code>中使用数字区间</h3><p>其实，<code>switch/case</code>中的<code>case</code>条件，还可以这样写：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCategory</span>(<span class="params">age</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> category = <span class="string">&quot;&quot;</span>;  </span><br><span class="line">    <span class="keyword">switch</span> (<span class="literal">true</span>) &#123;  </span><br><span class="line">        <span class="keyword">case</span> <span class="built_in">isNaN</span>(age):  </span><br><span class="line">            category = <span class="string">&quot;not an age&quot;</span>;  </span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> (age &gt;= <span class="number">50</span>):  </span><br><span class="line">            category = <span class="string">&quot;Old&quot;</span>;  </span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">case</span> (age &lt;= <span class="number">20</span>):  </span><br><span class="line">            category = <span class="string">&quot;Baby&quot;</span>;  </span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line">        <span class="keyword">default</span>:  </span><br><span class="line">            category = <span class="string">&quot;Young&quot;</span>;  </span><br><span class="line">            <span class="keyword">break</span>;  </span><br><span class="line">    &#125;;  </span><br><span class="line">    <span class="keyword">return</span> category;  </span><br><span class="line">&#125;  </span><br><span class="line">getCategory(<span class="number">5</span>);  <span class="comment">// 将返回 &quot;Baby&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="38、使用对象作为对象的原型"><a href="#38、使用对象作为对象的原型" class="headerlink" title="38、使用对象作为对象的原型"></a>38、使用对象作为对象的原型</h3><p>下面这样，便可以给定对象作为参数，来创建以此为原型的新对象：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clone</span>(<span class="params">object</span>) </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">OneShotConstructor</span>(<span class="params"></span>)</span>&#123;&#125;; </span><br><span class="line">    OneShotConstructor.prototype = object;  </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> OneShotConstructor(); </span><br><span class="line">&#125; </span><br><span class="line">clone(<span class="built_in">Array</span>).prototype ;  <span class="comment">// []</span></span><br></pre></td></tr></table></figure>

<h3 id="39、HTML字段转换函数"><a href="#39、HTML字段转换函数" class="headerlink" title="39、HTML字段转换函数"></a>39、HTML字段转换函数</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">escapeHTML</span>(<span class="params">text</span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">var</span> replacements= &#123;<span class="string">&quot;&lt;&quot;</span>: <span class="string">&quot;&amp;lt;&quot;</span>, <span class="string">&quot;&gt;&quot;</span>: <span class="string">&quot;&amp;gt;&quot;</span>,<span class="string">&quot;&amp;&quot;</span>: <span class="string">&quot;&amp;amp;&quot;</span>, <span class="string">&quot;\&quot;&quot;</span>: <span class="string">&quot;&amp;quot;&quot;</span>&#125;;                      </span><br><span class="line">    <span class="keyword">return</span> text.replace(<span class="regexp">/[&lt;&gt;&amp;&quot;]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">character</span>) </span>&#123;  </span><br><span class="line">        <span class="keyword">return</span> replacements[character];  </span><br><span class="line">    &#125;); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="40、不要在循环内部使用try-catch-finally"><a href="#40、不要在循环内部使用try-catch-finally" class="headerlink" title="40、不要在循环内部使用try-catch-finally"></a>40、不要在循环内部使用try-catch-finally</h3><p>try-catch-finally中catch部分在执行时会将异常赋给一个变量，这个变量会被构建成一个运行时作用域内的新的变量。</p>
<p>切忌：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> object = [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>], i;  </span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>, len = object.length; i &lt;len; i++) &#123;  </span><br><span class="line">    <span class="keyword">try</span> &#123;  </span><br><span class="line">        <span class="comment">// do something that throws an exception </span></span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">catch</span> (e) &#123;   </span><br><span class="line">        <span class="comment">// handle exception  </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>而应该：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> object = [<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>], i;  </span><br><span class="line"><span class="keyword">try</span> &#123; </span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = object.length; i &lt;len; i++) &#123;  </span><br><span class="line">        <span class="comment">// do something that throws an exception </span></span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">catch</span> (e) &#123;   </span><br><span class="line">    <span class="comment">// handle exception  </span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="41、使用XMLHttpRequests时注意设置超时"><a href="#41、使用XMLHttpRequests时注意设置超时" class="headerlink" title="41、使用XMLHttpRequests时注意设置超时"></a>41、使用XMLHttpRequests时注意设置超时</h3><p>XMLHttpRequests在执行时，当长时间没有响应（如出现网络问题等）时，应该中止掉连接，可以通过<code>setTimeout()</code>来完成这个工作：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xhr = <span class="keyword">new</span> XMLHttpRequest (); </span><br><span class="line">xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.readyState == <span class="number">4</span>) &#123;  </span><br><span class="line">        <span class="built_in">clearTimeout</span>(timeout);  </span><br><span class="line">        <span class="comment">// do something with response data </span></span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="keyword">var</span> timeout = <span class="built_in">setTimeout</span>( <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  </span><br><span class="line">    xhr.abort(); <span class="comment">// call error callback  </span></span><br><span class="line">&#125;, <span class="number">60</span>*<span class="number">1000</span> <span class="comment">/* timeout after a minute */</span> ); </span><br><span class="line">xhr.open(<span class="string">&#x27;GET&#x27;</span>, url, <span class="literal">true</span>);  </span><br><span class="line">xhr.send();</span><br></pre></td></tr></table></figure>

<p>同时需要注意的是，不要同时发起多个XMLHttpRequests请求。</p>
<h3 id="42、处理WebSocket的超时"><a href="#42、处理WebSocket的超时" class="headerlink" title="42、处理WebSocket的超时"></a>42、处理WebSocket的超时</h3><p>通常情况下，WebSocket连接创建后，如果30秒内没有任何活动，服务器端会对连接进行超时处理，防火墙也可以对单位周期没有活动的连接进行超时处理。</p>
<p>为了防止这种情况的发生，可以每隔一定时间，往服务器发送一条空的消息。可以通过下面这两个函数来实现这个需求，一个用于使连接保持活动状态，另一个专门用于结束这个状态。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> timerID = <span class="number">0</span>; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">keepAlive</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">    <span class="keyword">var</span> timeout = <span class="number">15000</span>;  </span><br><span class="line">    <span class="keyword">if</span> (webSocket.readyState == webSocket.OPEN) &#123;  </span><br><span class="line">        webSocket.send(<span class="string">&#x27;&#x27;</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">    timerId = <span class="built_in">setTimeout</span>(keepAlive, timeout);  </span><br><span class="line">&#125;  </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cancelKeepAlive</span>(<span class="params"></span>) </span>&#123;  </span><br><span class="line">    <span class="keyword">if</span> (timerId) &#123;  </span><br><span class="line">        cancelTimeout(timerId);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>keepAlive()</code>函数可以放在WebSocket连接的<code>onOpen()</code>方法的最后面，<code>cancelKeepAlive()</code>放在<code>onClose()</code>方法的最末尾。</p>
<h3 id="43、时间注意原始操作符比函数调用快，使用VanillaJS"><a href="#43、时间注意原始操作符比函数调用快，使用VanillaJS" class="headerlink" title="43、时间注意原始操作符比函数调用快，使用VanillaJS"></a>43、时间注意<a target="_blank" rel="noopener" href="https://dev.opera.com/articles/efficient-javascript/?page=2#primitiveoperator">原始操作符比函数调用快</a>，使用<a target="_blank" rel="noopener" href="http://vanilla-js.com/">VanillaJS</a></h3><p>比如，一般不要这样：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> min = <span class="built_in">Math</span>.min(a,b); </span><br><span class="line">A.push(v);</span><br></pre></td></tr></table></figure>

<p>可以这样来代替：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> min = a &lt; b ? a : b; </span><br><span class="line">A[A.length] = v;</span><br></pre></td></tr></table></figure>

<h3 id="44、开发时注意代码结构，上线前检查并压缩JavaScript代码"><a href="#44、开发时注意代码结构，上线前检查并压缩JavaScript代码" class="headerlink" title="44、开发时注意代码结构，上线前检查并压缩JavaScript代码"></a>44、开发时注意代码结构，上线前检查并压缩JavaScript代码</h3><p>可以使用JSLint或JSMin等工具来检查并压缩代码。</p>
<h3 id="45、JavaScript博大精深，这里有些不错的学习资源"><a href="#45、JavaScript博大精深，这里有些不错的学习资源" class="headerlink" title="45、JavaScript博大精深，这里有些不错的学习资源"></a>45、JavaScript博大精深，这里有些<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/11246/best-resources-to-learn-javascript">不错的学习资源</a></h3><ul>
<li>  Code Academy资源：<a target="_blank" rel="noopener" href="http://www.codecademy.com/tracks/javascript">http://www.codecademy.com/tracks/javascript</a></li>
<li>  Marjin Haverbekex编写的_Eloquent JavaScript_：<a target="_blank" rel="noopener" href="http://eloquentjavascript.net/">http://eloquentjavascript.net/</a></li>
<li>  John Resig编写的_Advanced JavaScript_：<a target="_blank" rel="noopener" href="http://ejohn.org/apps/learn/">http://ejohn.org/apps/learn/</a></li>
</ul>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">显示目录</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">隐藏目录</button>
  <div class="random-toc">
    <h2>目录</h2>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81%E9%A6%96%E6%AC%A1%E4%B8%BA%E5%8F%98%E9%87%8F%E8%B5%8B%E5%80%BC%E6%97%B6%E5%8A%A1%E5%BF%85%E4%BD%BF%E7%94%A8var%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">1、首次为变量赋值时务必使用var关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8-%E5%8F%96%E4%BB%A3"><span class="toc-text">2、使用&#x3D;&#x3D;&#x3D;取代&#x3D;&#x3D;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E3%80%81underfined%E3%80%81null%E3%80%810%E3%80%81false%E3%80%81NaN%E3%80%81%E7%A9%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E9%80%BB%E8%BE%91%E7%BB%93%E6%9E%9C%E5%9D%87%E4%B8%BAfalse"><span class="toc-text">3、underfined、null、0、false、NaN、空字符串的逻辑结果均为false</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4%E3%80%81%E8%A1%8C%E5%B0%BE%E4%BD%BF%E7%94%A8%E5%88%86%E5%8F%B7"><span class="toc-text">4、行尾使用分号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5%E3%80%81%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">5、使用对象构造器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6%E3%80%81%E5%B0%8F%E5%BF%83%E4%BD%BF%E7%94%A8typeof%E3%80%81instanceof%E5%92%8Ccontructor"><span class="toc-text">6、小心使用typeof、instanceof和contructor</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8%E3%80%81%E4%BB%8E%E6%95%B0%E7%BB%84%E4%B8%AD%E9%9A%8F%E6%9C%BA%E8%8E%B7%E5%8F%96%E6%88%90%E5%91%98"><span class="toc-text">8、从数组中随机获取成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9%E3%80%81%E8%8E%B7%E5%8F%96%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-text">9、获取指定范围内的随机数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10%E3%80%81%E7%94%9F%E6%88%90%E4%BB%8E0%E5%88%B0%E6%8C%87%E5%AE%9A%E5%80%BC%E7%9A%84%E6%95%B0%E5%AD%97%E6%95%B0%E7%BB%84"><span class="toc-text">10、生成从0到指定值的数字数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11%E3%80%81%E7%94%9F%E6%88%90%E9%9A%8F%E6%9C%BA%E7%9A%84%E5%AD%97%E6%AF%8D%E6%95%B0%E5%AD%97%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">11、生成随机的字母数字字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12%E3%80%81%E6%89%93%E4%B9%B1%E6%95%B0%E5%AD%97%E6%95%B0%E7%BB%84%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-text">12、打乱数字数组的顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8E%BB%E7%A9%BA%E6%A0%BC"><span class="toc-text">13、字符串去空格</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14%E3%80%81%E6%95%B0%E7%BB%84%E4%B9%8B%E9%97%B4%E8%BF%BD%E5%8A%A0"><span class="toc-text">14、数组之间追加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15%E3%80%81%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%95%B0%E7%BB%84"><span class="toc-text">15、对象转换为数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16%E3%80%81%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E5%AD%97"><span class="toc-text">16、验证是否是数字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17%E3%80%81%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E7%BB%84"><span class="toc-text">17、验证是否是数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18%E3%80%81%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC%E5%92%8C%E6%9C%80%E5%B0%8F%E5%80%BC"><span class="toc-text">18、获取数组中的最大值和最小值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19%E3%80%81%E6%B8%85%E7%A9%BA%E6%95%B0%E7%BB%84"><span class="toc-text">19、清空数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20%E3%80%81%E4%B8%8D%E8%A6%81%E7%9B%B4%E6%8E%A5%E4%BB%8E%E6%95%B0%E7%BB%84%E4%B8%ADdelete%E6%88%96remove%E5%85%83%E7%B4%A0"><span class="toc-text">20、不要直接从数组中delete或remove元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21%E3%80%81%E4%BD%BF%E7%94%A8length%E5%B1%9E%E6%80%A7%E6%88%AA%E6%96%AD%E6%95%B0%E7%BB%84"><span class="toc-text">21、使用length属性截断数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22%E3%80%81%E5%9C%A8%E6%9D%A1%E4%BB%B6%E4%B8%AD%E4%BD%BF%E7%94%A8%E9%80%BB%E8%BE%91%E4%B8%8E%E6%88%96"><span class="toc-text">22、在条件中使用逻辑与或</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23%E3%80%81%E4%BD%BF%E5%BE%97map-%E5%87%BD%E6%95%B0%E6%96%B9%E6%B3%95%E5%AF%B9%E6%95%B0%E6%8D%AE%E5%BE%AA%E7%8E%AF"><span class="toc-text">23、使得map()函数方法对数据循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24%E3%80%81%E4%BF%9D%E7%95%99%E6%8C%87%E5%AE%9A%E5%B0%8F%E6%95%B0%E4%BD%8D%E6%95%B0"><span class="toc-text">24、保留指定小数位数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25%E3%80%81%E6%B5%AE%E7%82%B9%E8%AE%A1%E7%AE%97%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-text">25、浮点计算的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26%E3%80%81%E9%80%9A%E8%BF%87for-in%E5%BE%AA%E7%8E%AF%E6%A3%80%E6%9F%A5%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-text">26、通过for-in循环检查对象的属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27%E3%80%81%E9%80%97%E5%8F%B7%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-text">27、逗号操作符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28%E3%80%81%E4%B8%B4%E6%97%B6%E5%AD%98%E5%82%A8%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E5%92%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-text">28、临时存储用于计算和查询的变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29%E3%80%81%E6%8F%90%E5%89%8D%E6%A3%80%E6%9F%A5%E4%BC%A0%E5%85%A5isFinite-%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-text">29、提前检查传入isFinite()的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30%E3%80%81%E9%81%BF%E5%85%8D%E5%9C%A8%E6%95%B0%E7%BB%84%E4%B8%AD%E4%BD%BF%E7%94%A8%E8%B4%9F%E6%95%B0%E5%81%9A%E7%B4%A2%E5%BC%95"><span class="toc-text">30、避免在数组中使用负数做索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#31%E3%80%81%E7%94%A8JSON%E6%9D%A5%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-text">31、用JSON来序列化与反序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32%E3%80%81%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8eval-%E6%88%96%E8%80%85%E5%87%BD%E6%95%B0%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-text">32、不要使用eval()或者函数构造器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#33%E3%80%81%E9%81%BF%E5%85%8D%E4%BD%BF%E7%94%A8with"><span class="toc-text">33、避免使用with()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#34%E3%80%81%E4%B8%8D%E8%A6%81%E5%AF%B9%E6%95%B0%E7%BB%84%E4%BD%BF%E7%94%A8for-in"><span class="toc-text">34、不要对数组使用for-in</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#35%E3%80%81%E4%BC%A0%E7%BB%99setInterval-%E5%92%8CsetTimeout-%E6%97%B6%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%80%8C%E4%B8%8D%E6%98%AF%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">35、传给setInterval()和setTimeout()时使用函数而不是字符串</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#36%E3%80%81%E4%BD%BF%E7%94%A8switch-case%E4%BB%A3%E6%9B%BF%E4%B8%80%E5%A4%A7%E5%8F%A0%E7%9A%84if-else"><span class="toc-text">36、使用switch&#x2F;case代替一大叠的if&#x2F;else</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#37%E3%80%81%E5%9C%A8switch-case%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%95%B0%E5%AD%97%E5%8C%BA%E9%97%B4"><span class="toc-text">37、在switch&#x2F;case中使用数字区间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#38%E3%80%81%E4%BD%BF%E7%94%A8%E5%AF%B9%E8%B1%A1%E4%BD%9C%E4%B8%BA%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8E%9F%E5%9E%8B"><span class="toc-text">38、使用对象作为对象的原型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#39%E3%80%81HTML%E5%AD%97%E6%AE%B5%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="toc-text">39、HTML字段转换函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#40%E3%80%81%E4%B8%8D%E8%A6%81%E5%9C%A8%E5%BE%AA%E7%8E%AF%E5%86%85%E9%83%A8%E4%BD%BF%E7%94%A8try-catch-finally"><span class="toc-text">40、不要在循环内部使用try-catch-finally</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#41%E3%80%81%E4%BD%BF%E7%94%A8XMLHttpRequests%E6%97%B6%E6%B3%A8%E6%84%8F%E8%AE%BE%E7%BD%AE%E8%B6%85%E6%97%B6"><span class="toc-text">41、使用XMLHttpRequests时注意设置超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#42%E3%80%81%E5%A4%84%E7%90%86WebSocket%E7%9A%84%E8%B6%85%E6%97%B6"><span class="toc-text">42、处理WebSocket的超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#43%E3%80%81%E6%97%B6%E9%97%B4%E6%B3%A8%E6%84%8F%E5%8E%9F%E5%A7%8B%E6%93%8D%E4%BD%9C%E7%AC%A6%E6%AF%94%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E5%BF%AB%EF%BC%8C%E4%BD%BF%E7%94%A8VanillaJS"><span class="toc-text">43、时间注意原始操作符比函数调用快，使用VanillaJS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#44%E3%80%81%E5%BC%80%E5%8F%91%E6%97%B6%E6%B3%A8%E6%84%8F%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84%EF%BC%8C%E4%B8%8A%E7%BA%BF%E5%89%8D%E6%A3%80%E6%9F%A5%E5%B9%B6%E5%8E%8B%E7%BC%A9JavaScript%E4%BB%A3%E7%A0%81"><span class="toc-text">44、开发时注意代码结构，上线前检查并压缩JavaScript代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#45%E3%80%81JavaScript%E5%8D%9A%E5%A4%A7%E7%B2%BE%E6%B7%B1%EF%BC%8C%E8%BF%99%E9%87%8C%E6%9C%89%E4%BA%9B%E4%B8%8D%E9%94%99%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90"><span class="toc-text">45、JavaScript博大精深，这里有些不错的学习资源</span></a></li></ol>
  </div>
</div>

  
  
<nav id="pagination">
  
    <a href="/2015-01/Node-js-Ajax-Upload-File.html" class="prev">&larr; 上一篇 利用Ajax无刷新上传文件到Node.js服务器</a>
  

  

  
    <a href="/2015-01/shanghai-insect-museum.html" class="next">下一篇 上海昆虫博物馆 &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      <div id="uyan_frame"></div>
      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Stiekel using
      <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/stiekel/hexo-theme-random">Random</a>
      <br>
      
        &copy;
        

        2010
        
         - 2021
        
      
    </div>
  </div>
</div>

</div>


  <!-- UY BEGIN -->
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2066860"></script>
<!-- UY END -->

<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="https://avatars2.githubusercontent.com/u/2735087?s=60&u=775d4033139cae6b23c593bcf59fa433224ba4e3&v=4">
    <p id="description"></p>
    <ul class="social-icon">
  
  
    <li>
      <a target="_blank" rel="noopener" href="https://github.com/stiekel">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a target="_blank" rel="noopener" href="https://coding.net/u/Stiekel">
        
          <i class="icon iconfont coding">&#xe607;</i>
        
      </a>
    </li>
  
    <li>
      <a target="_blank" rel="noopener" href="https://twitter.com/SidCN">
        
          <i class="icon iconfont twitter">&#xe600;</i>
        
      </a>
    </li>
  
    <li>
      <a target="_blank" rel="noopener" href="http://weibo.com/sidcn">
        
          <i class="icon iconfont weibo">&#xe602;</i>
        
      </a>
    </li>
  
    <li>
      <a target="_blank" rel="noopener" href="http://www.douban.com/people/Stiekel/">
        
          <i class="icon iconfont douban">&#xe60f;</i>
        
      </a>
    </li>
  
    <li>
      <a target="_blank" rel="noopener" href="https://segmentfault.com/u/sid">
        
          <i class="icon iconfont segmentfault">&#xe611;</i>
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>

  <script>
if(isTriggerAnalytics) {
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?6ab46e09bc8d0da169baff9f975ecaf8";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
}
</script>



  <script>
if(isTriggerAnalytics) {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-3804589-6', 'auto');
  ga('send', 'pageview');
}

</script>



  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["flash"],"timer":true,"delay":1500000,"shuffle":true,"count":12};
var unsplashConfig = {"gravity":"center"};
// is show background images
var turnoffBackgroundImage = false;




var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

